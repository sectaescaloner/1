name: üêÄ RATA_SUPREMA_POWERSHELL_V6
on: 
  workflow_dispatch:
    inputs:
      reemo_key:
        description: 'Tu Private Key de Reemo.io'
        required: true

jobs:
  gaming-heist:
    runs-on: windows-latest
    steps:
      - name: üèéÔ∏è 1. BOOST DE RAM (32GB EN DISCO D) - M√âTODO MODERNO
        shell: powershell
        run: |
          Write-Host "[*] Aplicando esteroides a la RAM..." -ForegroundColor Cyan
          # Desactivamos el manejo autom√°tico de RAM (El reemplazo de wmic)
          $sys = Get-CimInstance Win32_ComputerSystem
          Set-CimInstance -CimInstance $sys -Property @{AutomaticManagedPagefile = $False}
          
          # Creamos el archivo de 32GB en el Disco D: (NVMe r√°pido)
          New-CimInstance -ClassName Win32_PageFileSetting -Property @{Name="D:\pagefile.sys"; InitialSize=32768; MaximumSize=32768}
          
          # Prioridad de CPU y Energ√≠a
          reg add "HKLM\System\CurrentControlSet\Control\PriorityControl" /v Win32PrioritySeparation /t REG_DWORD /d 26 /f
          powercfg /s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c
          Write-Host "[OK] RAM de 32GB configurada en D:"

      - name: üëÅÔ∏è 2. IMPLANTE DE OJOS (DRIVER DE MONITOR - ANTI-404)
        shell: powershell
        run: |
          Write-Host "[*] Instalando ojos a la VM..."
          # Usamos un link directo que apunta al √∫ltimo release estable
          $url = "https://github.com/itsmikethetech/Virtual-Display-Driver/releases/latest/download/IddSampleDriver.zip"
          curl.exe -L -o v_driver.zip $url
          
          Expand-Archive "v_driver.zip" -DestinationPath "C:\v_driver" -Force
          pnputil /add-driver C:\v_driver\IddSampleDriver.inf /install
          Write-Host "[OK] Monitor virtual de 60Hz activo."

      - name: üéÆ 3. MESA3D (FORZAR CPU COMO GPU)
        shell: powershell
        run: |
          # Chocolatey es la vieja confiable para no lidiar con links rotos
          choco install mesa3d-pal1000 -y
          Write-Host "[OK] Motor gr√°fico inyectado."

      - name: üïπÔ∏è 4. CONTROLES DE GAMING (VIGEMBUS)
        shell: powershell
        run: |
          choco install vigembus -y
          Write-Host "[OK] Driver de mando Xbox configurado."

      - name: üì∫ 5. REEMO.IO (STREAMING PARA RATAS PRO)
        shell: powershell
        run: |
          curl.exe -L -o reemo.msi "https://download.reemo.io/windows/Reemo.msi"
          msiexec.exe /i reemo.msi /quiet
          Start-Sleep -Seconds 10
          # Conexi√≥n con tu Reemo Key
          & "C:\Program Files\Reemo\Reemo.exe" -setup ${{ github.event.inputs.reemo_key }}
          Write-Host "========================================"
          Write-Host "TODO LISTO. Entra a reemo.io y a jugar."
          Write-Host "========================================"

      - name: üîÑ MANTENER VIVO
        run: |
          while($true) { Start-Sleep 60 }
          
