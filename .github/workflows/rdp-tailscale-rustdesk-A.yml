name: üêÄ RATA_SUPREMA_GTA5_FINAL_V5
on: 
  workflow_dispatch:
    inputs:
      reemo_key:
        description: 'Pega tu Private Key de Reemo.io'
        required: true

jobs:
  gaming-heist:
    runs-on: windows-latest
    steps:
      - name: üèéÔ∏è 1. OVERCLOCK DE RAM Y CPU (32GB VIRTUAL-REAL)
        shell: powershell
        run: |
          # 32GB de RAM en el Disco D (NVMe de Microsoft)
          wmic computersystem where name="%computername%" set AutomaticManagedPagefile=False
          wmic pagefileset create name="D:\pagefile.sys",InitialSize=32768,MaximumSize=32768
          
          # Prioridad de CPU para que el GTA no se arrastre
          reg add "HKLM\System\CurrentControlSet\Control\PriorityControl" /v Win32PrioritySeparation /t REG_DWORD /d 26 /f
          powercfg /s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c

      - name: üëÅÔ∏è 2. IMPLANTE DE OJOS (DRIVER DE MONITOR - M√âTODO ROBUSTO)
        shell: powershell
        run: |
          # Usamos curl.exe -L para evitar el error de redirecci√≥n (404)
          # Este link es el oficial directo del repositorio de MikeTheTech
          curl.exe -L -o v_driver.zip "https://github.com/itsmikethetech/Virtual-Display-Driver/releases/download/2.3/IddSampleDriver.zip"
          
          if (Test-Path "v_driver.zip") {
              Expand-Archive "v_driver.zip" -DestinationPath "C:\v_driver" -Force
              pnputil /add-driver C:\v_driver\IddSampleDriver.inf /install
              Write-Host "[OK] Monitor virtual instalado con √©xito."
          } else {
              Write-Error "[!] No se pudo descargar el driver. Intentando backup..."
          }

      - name: üéÆ 3. MESA3D (FORZAR CPU COMO GPU)
        shell: powershell
        run: |
          # Instalamos Mesa3D para que el AMD EPYC dibuje los gr√°ficos
          # Chocolatey es m√°s confiable para links que no mueren
          choco install mesa3d-pal1000 -y
          Write-Host "[OK] Implante gr√°fico inyectado."

      - name: üïπÔ∏è 4. CONTROLES DE GAMING (VIGEMBUS)
        shell: powershell
        run: |
          # Driver de controles para que el GTA 5 reconozca tu teclado/mando
          choco install vigembus -y
          Write-Host "[OK] Driver de mando Xbox configurado."

      - name: üì∫ 5. REEMO.IO (STREAMING POR NAVEGADOR)
        shell: powershell
        run: |
          # Instalador oficial de Reemo
          curl.exe -L -o reemo.msi "https://download.reemo.io/windows/Reemo.msi"
          msiexec.exe /i reemo.msi /quiet
          Start-Sleep -Seconds 10
          # Conexi√≥n final con tu llave
          & "C:\Program Files\Reemo\Reemo.exe" -setup ${{ github.event.inputs.reemo_key }}
          Write-Host "========================================"
          Write-Host "TODO LISTO CAUSITA. Entra a reemo.io en tu navegador."
          Write-Host "========================================"

      - name: üîÑ MANTENER VIVO
        run: |
          while($true) { Start-Sleep 60 }

